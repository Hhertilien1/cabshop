<!DOCTYPE html>
<html lang="en">
<head>
    <nav>
        <div>
            <a href="home.html">Home</a>
            <a href="createemployee.html">Create Employee</a>
        </div>
        <a href="logout.html">Logout</a>
    </nav>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Saver</title>
    <style>
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        th, td {
            border: 1px solid #427a49;
            padding: 8px;
            text-align: left;
        }
        th {
            background-color: #641e1e;
        }
        .error {
            color: red;
        }
        
        .status-to-do {
            color: red;
        }
        .status-in-progress {
            color: orange;
        }
        .status-completed {
            color: green;
        }

    </style>
</head>
<body>
    <h1>Create Jobs</h1>
    <form id="jobForm">
        <label for="jobNumber">Job #: </label>
        <input type="number" id="jobNumber" required><br><br>

        <label for="jobName">Job Name: </label>
        <input type="text" id="jobName" required><br><br>

        <label for="numCabinets"># of Cabinets: </label>
        <input type="number" id="numCabinets" required><br><br>

        <label for="numUppers"># of Uppers: </label>
        <input type="number" id="numUppers" required><br><br>

        <label for="numLowers"># of Lowers: </label>
        <input type="number" id="numLowers" required><br><br>

        <label for="cabinetMaker">Cabinet Maker: </label>
        <input type="text" id="cabinetMaker" required><br><br>

        <label for="installer">Installer: </label>
        <input type="text" id="installer" required><br><br>

        <label for="dueDate">Due Date: </label>
        <input type="date" id="dueDate" required><br><br>

        <label for="jobColor">Job Color: </label>
        <input type="text" id="jobColor" required><br><br>

        <label for="office">Office: </label>
        <select id="office" required>
            <option value="">Select Office</option>
            <option value="400">400</option>
            <option value="402">402</option>
            <option value="403">403</option>
        </select><br><br>

        <label for="status">Status: </label>
        <select id="status" required>
            <option value="">Select Status</option>
            <option value="To-Do">To-Do</option>
            <option value="In Progress">In Progress</option>
            <option value="Completed">Completed</option>
        </select><br><br>

        <button type="button" onclick="addJob()">Add Job</button>
        <p class="error" id="error"></p>
    </form>

    <table>
        <thead>
            <tr>
                <th>Job #</th>
                <th>Job Name</th>
                <th># of Cabinets</th>
                <th># of Uppers</th>
                <th># of Lowers</th>
                <th>Cabinet Maker</th>
                <th>Installer</th>
                <th>Due Date</th>
                <th>Job Color</th>
                <th>Office</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody id="jobTableBody">
        </tbody>
    </table>

    <script>
        let jobs = [];

        function addJob() {
            const jobNumber = document.getElementById("jobNumber").value;
            const jobName = document.getElementById("jobName").value;
            const numCabinets = document.getElementById("numCabinets").value;
            const numUppers = document.getElementById("numUppers").value;
            const numLowers = document.getElementById("numLowers").value;
            const cabinetMaker = document.getElementById("cabinetMaker").value;
            const installer = document.getElementById("installer").value;
            const dueDate = document.getElementById("dueDate").value;
            const jobColor = document.getElementById("jobColor").value;
            const office = document.getElementById("office").value;
            const status = document.getElementById("status").value;
            const errorElement = document.getElementById("error");

            // Clear error message
            errorElement.textContent = "";

            // Validate inputs
            if (!jobNumber || !jobName || !numCabinets || !numUppers || !numLowers || !cabinetMaker || !installer || !dueDate || !jobColor || !office || !status) {
                errorElement.textContent = "All fields are required.";
                return;
            }

            // Add job to array
            const job = {
                jobNumber,
                jobName,
                numCabinets,
                numUppers,
                numLowers,
                cabinetMaker,
                installer,
                dueDate,
                jobColor,
                office,
                status
            };

            jobs.push(job);
            renderTable();

            // Reset form
            document.getElementById("jobForm").reset();
        }

        function renderTable() {
            const tableBody = document.getElementById("jobTableBody");
            tableBody.innerHTML = "";

            jobs.forEach((job, index) => {
                const row = document.createElement("tr");

                let statusClass = "";
                if (job.status === "To-Do") {
                    statusClass = "status-to-do";
                } else if (job.status === "In Progress") {
                    statusClass = "status-in-progress";
                } else if (job.status === "Completed") {
                    statusClass = "status-completed";
                }

                row.innerHTML = `
                    <td>${job.jobNumber}</td>
                    <td>${job.jobName}</td>
                    <td>${job.numCabinets}</td>
                    <td>${job.numUppers}</td>
                    <td>${job.numLowers}</td>
                    <td>${job.cabinetMaker}</td>
                    <td>${job.installer}</td>
                    <td>${job.dueDate}</td>
                    <td>${job.jobColor}</td>
                    <td>${job.office}</td>
                    <td class="${statusClass}">${job.status}</td>
                    <td>
                        <button onclick="editJob(${index})">Edit</button>
                        <button onclick="deleteJob(this)">Delete</button>
                    </td>
                `;

                tableBody.appendChild(row);
            });
        }

        function deleteJob(button) {
            const row = button.parentElement.parentElement;
            row.remove();
        }

        function editJob(index) {
            const job = jobs[index];

            document.getElementById("jobNumber").value = job.jobNumber;
            document.getElementById("jobName").value = job.jobName;
            document.getElementById("numCabinets").value = job.numCabinets;
            document.getElementById("numUppers").value = job.numUppers;
            document.getElementById("numLowers").value = job.numLowers;
            document.getElementById("cabinetMaker").value = job.cabinetMaker;
            document.getElementById("installer").value = job.installer;
            document.getElementById("dueDate").value = job.dueDate;
            document.getElementById("jobColor").value = job.jobColor;
            document.getElementById("office").value = job.office;
            document.getElementById("status").value = job.status;

            // Remove the job and re-render table after editing
            jobs.splice(index, 1);
            renderTable();
        }
    </script>
</body>
</html>
